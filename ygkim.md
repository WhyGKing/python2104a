주말 동안 2개의 사이트에서 작업을 했는데, 원하는 결과물은 아직 얻지 못했습니다.
수업 시간에 도움을 받겠습니다. 고맙습니다. ^^

1) 금리변동자료: https://www.index.go.kr/strata/jsp/showStblGams3.jsp?stts_cd=107301&idx_cd=1073&freq=M&period=199701:202104  

\> 목표: 원하는 자료는 월별로 모든 자료를 가져오는 것이고, index 에 '년월'을 적용하는 것입니다.  
\> 현재진행 현황: html 소스에서 iframe에 적용된 url을 찾아서, 그 웹페이지를  데이타 크롤링하여 '국고채 10년'에 대한 정보만 가져와 데이타프레임에 넣은 상태.   

2) 코스피주가변동자료:  
\> 목표: 년 또는 월별 코스피 종가를 추출해 내서, 위의 금리 변동자료와 '년월'이 일치하도록 데이타를 합치는 것입니다.  
\> 현재 진행 현황: Selenium을 이용해서 자료가 있는 페이지까지 웹페이지를 열었는데, 소스에서 자료를 찾지 못했습니다.  


```python
## 교육생 질문 소스 코드.... 
## WebCrawl_bond.py

### 국채금리 변동자료를 받아오기 위한 코드입니다.

from typing import Text
import requests
from bs4 import BeautifulSoup
import pandas as pd
from pandas import Series, DataFrame
```


```python
### 자바스크립트 url을 찾아서 주소를 가져옴.
source = requests.get('https://www.index.go.kr/strata/jsp/showStblGams3.jsp?stts_cd=107301&idx_cd=1073&freq=M&period=199701:202104')
soup = BeautifulSoup(source.content,'html.parser')
table = soup.find('tbody').find('tr',{'id':'tr_107301_3'})
```


```python
### 국고채 10년물 금리변동 자료 추출
td_all = table.find_all('td')

bond_data = []
for i in td_all:
    td_text = i.get_text()
    bond_data.append(td_text)
    
```


```python
### 날짜(년월)를 추출하기 위해
th_date = soup.find('thead').find_all('th')

bond_month = []
for j in th_date: # 년도숫자 뒤에 '년'을 추가하고 싶은데, 못찾았음.
    th_d = j.get_text()
    
    # 솔루션...
    # 확인을 위해 먼저 읽어온 데이터의 값을 출력해보니 <199701월> 형태로 출력됨
    # xxxx년xx월 형태로 구성하기 위해서는
    # 앞 4글자를 추출하고 "년"을 결합하여 strYear로
    # 5번째 문자열부터 끝까지는 strMonth로  1차 가공후...
    # 두 문자열을 합하여 th_d로 만들어 
    # bond_month에 추가하도록 수정함
    strYear = th_d[:4]
    strYear += "년"
    strMonth = th_d[4:]
    #print(strYear) # 중간 점검용 출력
    #print(strMonth)  # 중간 점검용 출력
    th_d = strYear + strMonth
    print(th_d)
    
    bond_month.append(th_d)
```

     년
    1997년01월
    1997년02월
    1997년03월
    1997년04월
    1997년05월
    1997년06월
    1997년07월
    1997년08월
    1997년09월
    1997년10월
    1997년11월
    1997년12월
    1998년01월
    1998년02월
    1998년03월
    1998년04월
    1998년05월
    1998년06월
    1998년07월
    1998년08월
    1998년09월
    1998년10월
    1998년11월
    1998년12월
    1999년01월
    1999년02월
    1999년03월
    1999년04월
    1999년05월
    1999년06월
    1999년07월
    1999년08월
    1999년09월
    1999년10월
    1999년11월
    1999년12월
    2000년01월
    2000년02월
    2000년03월
    2000년04월
    2000년05월
    2000년06월
    2000년07월
    2000년08월
    2000년09월
    2000년10월
    2000년11월
    2000년12월
    2001년01월
    2001년02월
    2001년03월
    2001년04월
    2001년05월
    2001년06월
    2001년07월
    2001년08월
    2001년09월
    2001년10월
    2001년11월
    2001년12월
    2002년01월
    2002년02월
    2002년03월
    2002년04월
    2002년05월
    2002년06월
    2002년07월
    2002년08월
    2002년09월
    2002년10월
    2002년11월
    2002년12월
    2003년01월
    2003년02월
    2003년03월
    2003년04월
    2003년05월
    2003년06월
    2003년07월
    2003년08월
    2003년09월
    2003년10월
    2003년11월
    2003년12월
    2004년01월
    2004년02월
    2004년03월
    2004년04월
    2004년05월
    2004년06월
    2004년07월
    2004년08월
    2004년09월
    2004년10월
    2004년11월
    2004년12월
    2005년01월
    2005년02월
    2005년03월
    2005년04월
    2005년05월
    2005년06월
    2005년07월
    2005년08월
    2005년09월
    2005년10월
    2005년11월
    2005년12월
    2006년01월
    2006년02월
    2006년03월
    2006년04월
    2006년05월
    2006년06월
    2006년07월
    2006년08월
    2006년09월
    2006년10월
    2006년11월
    2006년12월
    2007년01월
    2007년02월
    2007년03월
    2007년04월
    2007년05월
    2007년06월
    2007년07월
    2007년08월
    2007년09월
    2007년10월
    2007년11월
    2007년12월
    2008년01월
    2008년02월
    2008년03월
    2008년04월
    2008년05월
    2008년06월
    2008년07월
    2008년08월
    2008년09월
    2008년10월
    2008년11월
    2008년12월
    2009년01월
    2009년02월
    2009년03월
    2009년04월
    2009년05월
    2009년06월
    2009년07월
    2009년08월
    2009년09월
    2009년10월
    2009년11월
    2009년12월
    2010년01월
    2010년02월
    2010년03월
    2010년04월
    2010년05월
    2010년06월
    2010년07월
    2010년08월
    2010년09월
    2010년10월
    2010년11월
    2010년12월
    2011년01월
    2011년02월
    2011년03월
    2011년04월
    2011년05월
    2011년06월
    2011년07월
    2011년08월
    2011년09월
    2011년10월
    2011년11월
    2011년12월
    2012년01월
    2012년02월
    2012년03월
    2012년04월
    2012년05월
    2012년06월
    2012년07월
    2012년08월
    2012년09월
    2012년10월
    2012년11월
    2012년12월
    2013년01월
    2013년02월
    2013년03월
    2013년04월
    2013년05월
    2013년06월
    2013년07월
    2013년08월
    2013년09월
    2013년10월
    2013년11월
    2013년12월
    2014년01월
    2014년02월
    2014년03월
    2014년04월
    2014년05월
    2014년06월
    2014년07월
    2014년08월
    2014년09월
    2014년10월
    2014년11월
    2014년12월
    2015년01월
    2015년02월
    2015년03월
    2015년04월
    2015년05월
    2015년06월
    2015년07월
    2015년08월
    2015년09월
    2015년10월
    2015년11월
    2015년12월
    2016년01월
    2016년02월
    2016년03월
    2016년04월
    2016년05월
    2016년06월
    2016년07월
    2016년08월
    2016년09월
    2016년10월
    2016년11월
    2016년12월
    2017년01월
    2017년02월
    2017년03월
    2017년04월
    2017년05월
    2017년06월
    2017년07월
    2017년08월
    2017년09월
    2017년10월
    2017년11월
    2017년12월
    2018년01월
    2018년02월
    2018년03월
    2018년04월
    2018년05월
    2018년06월
    2018년07월
    2018년08월
    2018년09월
    2018년10월
    2018년11월
    2018년12월
    2019년01월
    2019년02월
    2019년03월
    2019년04월
    2019년05월
    2019년06월
    2019년07월
    2019년08월
    2019년09월
    2019년10월
    2019년11월
    2019년12월
    2020년01월
    2020년02월
    2020년03월
    2020년04월
    2020년05월
    2020년06월
    2020년07월
    2020년08월
    2020년09월
    2020년10월
    2020년11월
    2020년12월
    2021년01월
    2021년02월
    2021년03월
    2021년04월
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    년
    


```python
### 데이타프레임 만들기 
# df_rate = {'bond_10':bond_data}
# df_bond_rate = DataFrame(df_rate)
# print(df_bond_rate)
# # index로 년월(bond_month)을 사용하고 싶은데 잘 안됨.


### 솔루션...
# 첫번재 가비지 삭제 ; 첫 컬럼에 \년 가비지 데이터 포함되어 있음
del bond_month[0]
# print(len(bond_month))
# print(len(bond_data))
tbldata = {
    'Year-Month':list(bond_month[:292]),    
    'ProfitRate':list(bond_data[:292])      
}
df = DataFrame(tbldata)
df_bond_rate = df.set_index("Year-Month")
print(df_bond_rate)
```

               ProfitRate
    Year-Month           
    1997년01월            -
    1997년02월            -
    1997년03월            -
    1997년04월            -
    1997년05월            -
    ...               ...
    2020년12월         1.68
    2021년01월         1.73
    2021년02월         1.85
    2021년03월         2.04
    2021년04월         2.04
    
    [292 rows x 1 columns]
    


```python

```
